## 题目
一个整型数组 nums 里除两个数字之外，其他数字都出现了两次。请写程序找出这两个只出现一次的数字。要求时间复杂度是O(n)，空间复杂度是O(1)。

[连接](https://leetcode-cn.com/problems/shu-zu-zhong-shu-zi-chu-xian-de-ci-shu-lcof/)

TAG: 中等

## 解决方案

双指针
将数组按递增序列排好序后，使用两个指针，开始指针A指向数组第0位，指针B指向数组第1位，如果AB相等就都向前走两步，如果不相等就都向前走一步，同时将A指针的数保存。

最后的情况只有两种，最后一个数只出现两次和最后一个数只出现一次，而出现了两次的情况时，AB指针都会超出数组范围，自动跳出循环；第二种情况，B指针率先超出数组范围，等于length；此时需要将A指针的数保存起来。

```javascript
var singleNumbers = function(nums) {
    nums.sort((a, b) => a - b);
    let i = 0, j = 1;
    let res = [];
    while(i < nums.length) {
        if (nums[i] === nums[j]) {
            i += 2;
            j += 2;
        } else {
            res.push(nums[i]);
            i += 1;
            j += 1;
        }
        if(j === nums.length) {
            res.push(nums[i]);
            break;
        }
    }
    return res;
};
```
时间复杂度O(n)，空间复杂度O(1)

**异或运算解法**
简化问题：一个整型数组里除了一个数字之外，其他数字都出现了两次

异或运算：0^0 = 0, 1^1 = 1, 0^1=1^0=1

回到题目，发现题目是由两个子问题“一个整型数组里除了一个数字之外，其他数字都出现了两次”组成的。

因此将nums分成两个子数组


**别人的理解**
- 第一轮整体遍历，求出a^b（因为相同的数字异或为0，0异或任何数字为数字自身）
- 然后结合a^b以及原来数组求出这两个数字
  - 原理：用一个只有一位为1的数字来遍历异或整个数组，把这个数组分成两个子数组（异或结果相同的数字在同一个子数组），如果是两个相同的数字，它们一定在同一个子数组里（保证子数组异或时为0），现在只需要把两个只出现一次的数字分到不同的子数组，那么子数组分别遍历异或得到的两个数字就是这两个数字。
  - 怎么把两个只出现一次的数字分到不同地子数组？
    - 找到a^b第一个为1的位置，异或结果为1说明a和b在这一位上不同，那用只有这一位为1的数字m去分别异或a和b，得到的结果一定不同，也就把a和b分到了不同的子数组。结合上一点得出结果。

```javascript
function fo(nums) {
  let x = 0, y = 0, n = 0, m = 1;
  for(let num of nums) n ^= num;

  while(n & m === 0) m <<= 1;

  for(let num of nums) {
    if (num & m) x ^= num;
    else y ^= num;
  }
  return [x, y]
}
```
难懂

